<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=1.3"></script>
		<script src="http://webapi.amap.com/maps?v=1.3"></script>
		<script type="text/javascript" src="js/KpBaseMap.js"></script>
		<script type="text/javascript" src="js/KpPolygon.js"></script>
		<script type="text/javascript" src="js/KpPoint.js"></script>
		<script type="text/javascript" src="js/KpBounds.js"></script>
		<style type="text/css">
			body,
			html,
			#allmap {
				width: 100%;
				height: 100%;
				overflow: hidden;
				margin: 0;
				font-family: "微软雅黑";
			}
			
			.right-query {
				float: right;
				position: absolute;
				top: 10px;
				right: 117px;
			}
		</style>
	</head>

	<body>
		<div id="allmap"></div>
		<div class="right-query">
			<button onclick="drawing.switch();">切换地图</button>
		</div>
	</body>
	<script>
		var amapOptions = {
			id: "allmap",
			apiType: "AMap",
			zoom: 14,
			lng: '113.551694',
			lat: '22.365569'
		};
		var bmapOptions = {
			id: "allmap",
			apiType: "BMap",
			zoom: 15,
			lng: '113.551694',
			lat: '22.365569'
		};

		var map = new KingMap.Map(bmapOptions);
		drawPolygonOnBMap(map);

		var flag = 'BMap';
		drawing = {
			switch: function() {
				document.getElementById("allmap").innerHTML = '';
				if(flag == 'BMap') {
					map = new KingMap.Map(amapOptions);
					flag = 'AMap';
					drawPolygonOnAMap(map);
				} else {
					map = new KingMap.Map(bmapOptions);
					flag = 'BMap';
					drawPolygonOnBMap(map);
				}
			}

		}

		function drawPolygonOnBMap(map) {

			var polygonStr1 = "113.551694,22.365569;113.549455,22.36153;113.546974,22.35702;113.546928,22.356998;113.546869,22.35702;113.546105,22.35742;113.54493,22.358001;113.544758,22.358111;113.544767,22.358574;113.54464,22.358674;113.54435,22.358557;113.543434,22.358486;113.542754,22.358597;113.542084,22.358871;113.54166,22.359164;113.541422,22.359254;113.540562,22.359402;113.54033,22.359483;113.539721,22.359979;113.539412,22.360144;113.538768,22.360258;113.538631,22.360329;113.538384,22.360631;113.538246,22.360717;113.538123,22.360729;113.538032,22.360696;113.537956,22.360589;113.537771,22.360267;113.537676,22.360159;113.537571,22.360108;113.537469,22.360118;113.537418,22.360173;113.537411,22.360299;113.537895,22.361154;113.537212,22.361799;113.536614,22.362593;113.536596,22.363083;113.536495,22.363227;113.536139,22.363234;113.53552,22.36333;113.534955,22.363467;113.534645,22.363467;113.53435,22.363414;113.534201,22.363523;113.533959,22.363901;113.533798,22.364036;113.533475,22.364092;113.533354,22.364281;113.5333,22.364618;113.533085,22.365023;113.532964,22.365483;113.53291,22.365941;113.532951,22.366454;113.533085,22.366804;113.533394,22.36733;113.533162,22.367546;113.532983,22.367464;113.531326,22.367242;113.530499,22.367278;113.530451,22.367276;113.530418,22.367256;113.530298,22.36712;113.529871,22.367045;113.529756,22.367;113.529464,22.366801;113.529088,22.366478;113.528926,22.366302;113.528752,22.366001;113.528511,22.365336;113.528313,22.364577;113.528223,22.364466;113.52801,22.364299;113.527516,22.364453;113.527421,22.364433;113.527354,22.364359;113.527275,22.3642;113.527239,22.364012;113.527209,22.363724;113.527094,22.363547;113.526979,22.363454;113.526843,22.363381;113.526523,22.36341;113.526222,22.363514;113.526076,22.363658;113.526069,22.364569;113.526092,22.36774;113.525745,22.368008;113.525551,22.368129;113.525463,22.368545;113.525476,22.368573;113.525508,22.368591;113.52559,22.368611;113.528346,22.368978;113.529769,22.369161;113.531197,22.369364;113.531346,22.369311;113.53142,22.369296;113.531516,22.369308;113.532066,22.369396;113.53222,22.369431;113.532397,22.369503;113.532934,22.369553;113.534739,22.369594;113.536443,22.369583;113.539432,22.369469;113.541957,22.36921;113.543991,22.368846;113.545895,22.368351;113.547232,22.367971;113.549615,22.367062;113.551518,22.366175;113.551659,22.36604;113.55172,22.365821";
			var options = {
				polygon: polygonStr1
			};

			//构造KingMap.Polygon实例
			var kpPolygon1 = new KingMap.Polygon(map, options);

			//var polygon = kpPolygon1.getPolygon();
			
			kpPolygon1.addEventListener('click', function(e) {
				var polygonStr = "113.517032,22.350776;113.517142,22.350645;113.517284,22.350511;113.517458,22.350362;113.517665,22.350168;113.518011,22.349841;113.518341,22.349516;113.518652,22.349149;113.518842,22.348978;113.518944,22.349072;113.519178,22.349657;113.519341,22.350238;113.519365,22.350709;113.519376,22.351096;113.519277,22.351498;113.519167,22.351863;113.519086,22.351888;113.518933,22.351893;113.518139,22.351739;113.51789,22.351674;113.517702,22.351555;113.517469,22.351349;113.517426,22.351253;113.51737,22.351076";
				kpPolygon1.setPath(polygonStr);
				alert('覆盖物已经切换');
				
				//kpPolygon1.remove()
				
				//获取覆盖物的边界经纬度
				//alert(kpPolygon1.getPath());
				
				//测试隐藏覆盖物:hide()
				//kpPolygon1.hide();
				
				//测试获取覆盖物所在地图对象：getMap()
				//alert(kpPolygon1.getMap());
				
				//测试获取覆盖物的地理区域范围
				//alert(kpPolygon1.getBounds());
				
				//测试获取高德或百度地图原生的地图对象
				//alert(polygon['CLASS_NAME']); 
			});
			return kpPolygon1;
		}

		function drawPolygonOnAMap(map) {
			var polygonStr1 = "113.551694,22.365569;113.549455,22.36153;113.546974,22.35702;113.546928,22.356998;113.546869,22.35702;113.546105,22.35742;113.54493,22.358001;113.544758,22.358111;113.544767,22.358574;113.54464,22.358674;113.54435,22.358557;113.543434,22.358486;113.542754,22.358597;113.542084,22.358871;113.54166,22.359164;113.541422,22.359254;113.540562,22.359402;113.54033,22.359483;113.539721,22.359979;113.539412,22.360144;113.538768,22.360258;113.538631,22.360329;113.538384,22.360631;113.538246,22.360717;113.538123,22.360729;113.538032,22.360696;113.537956,22.360589;113.537771,22.360267;113.537676,22.360159;113.537571,22.360108;113.537469,22.360118;113.537418,22.360173;113.537411,22.360299;113.537895,22.361154;113.537212,22.361799;113.536614,22.362593;113.536596,22.363083;113.536495,22.363227;113.536139,22.363234;113.53552,22.36333;113.534955,22.363467;113.534645,22.363467;113.53435,22.363414;113.534201,22.363523;113.533959,22.363901;113.533798,22.364036;113.533475,22.364092;113.533354,22.364281;113.5333,22.364618;113.533085,22.365023;113.532964,22.365483;113.53291,22.365941;113.532951,22.366454;113.533085,22.366804;113.533394,22.36733;113.533162,22.367546;113.532983,22.367464;113.531326,22.367242;113.530499,22.367278;113.530451,22.367276;113.530418,22.367256;113.530298,22.36712;113.529871,22.367045;113.529756,22.367;113.529464,22.366801;113.529088,22.366478;113.528926,22.366302;113.528752,22.366001;113.528511,22.365336;113.528313,22.364577;113.528223,22.364466;113.52801,22.364299;113.527516,22.364453;113.527421,22.364433;113.527354,22.364359;113.527275,22.3642;113.527239,22.364012;113.527209,22.363724;113.527094,22.363547;113.526979,22.363454;113.526843,22.363381;113.526523,22.36341;113.526222,22.363514;113.526076,22.363658;113.526069,22.364569;113.526092,22.36774;113.525745,22.368008;113.525551,22.368129;113.525463,22.368545;113.525476,22.368573;113.525508,22.368591;113.52559,22.368611;113.528346,22.368978;113.529769,22.369161;113.531197,22.369364;113.531346,22.369311;113.53142,22.369296;113.531516,22.369308;113.532066,22.369396;113.53222,22.369431;113.532397,22.369503;113.532934,22.369553;113.534739,22.369594;113.536443,22.369583;113.539432,22.369469;113.541957,22.36921;113.543991,22.368846;113.545895,22.368351;113.547232,22.367971;113.549615,22.367062;113.551518,22.366175;113.551659,22.36604;113.55172,22.365821";
			var options = {
				polygon: polygonStr1
			};

			//构造KingMap.Polygon实例
			var kpPolygon1 = new KingMap.Polygon(map, options);

			//var polygon = kpPolygon1.getPolygon();
			
			kpPolygon1.addEventListener('click', function(e) { 
				var polygonStr = "113.517032,22.350776;113.517142,22.350645;113.517284,22.350511;113.517458,22.350362;113.517665,22.350168;113.518011,22.349841;113.518341,22.349516;113.518652,22.349149;113.518842,22.348978;113.518944,22.349072;113.519178,22.349657;113.519341,22.350238;113.519365,22.350709;113.519376,22.351096;113.519277,22.351498;113.519167,22.351863;113.519086,22.351888;113.518933,22.351893;113.518139,22.351739;113.51789,22.351674;113.517702,22.351555;113.517469,22.351349;113.517426,22.351253;113.51737,22.351076";
				kpPolygon1.setPath(polygonStr);
				alert('覆盖物已经切换');
				
				//kpPolygon1.remove();
				
				
				//获取覆盖物的边界经纬度
				//alert(kpPolygon1.getPath());
				
				//测试隐藏覆盖物:hide()
				//kpPolygon1.hide();
				
				//测试获取覆盖物所在地图对象：getMap()
				//alert(kpPolygon1.getMap());
				
				//测试获取覆盖物的地理区域范围
				//alert(kpPolygon1.getBounds());
				
				//测试获取高德或百度地图原生的地图对象
				//alert(polygon['CLASS_NAME']); 
			});
			console.log(kpPolygon1.getBounds().getCenter().getPoint('AMap'))
			return kpPolygon1;
		}
	</script>

</html>